# 쓰레드의 기본 개념과 필요성
## 쓰레드란.
쓰레드는 하나의 프로세스 안에서 실행되는 독립적인 실행 흐름이다. 프로세스가 운영체제에서 실행 중인 프로그램의 단위라면, 쓰레드는 그 프로세스 안에서 작업을 수행하는 작은 단위이다.
쓰레드는 같은 프로세스 내에서 자원을 공유하며, 여러 작업을 동시에 수행하기 위해 만들어졌다.

현대의 컴퓨터 프로그램은 대부분 쓰레드를 사용하여 병렬 작업을 수행한다. 예를 들어, 음악 스트리밍 앱은 다음과 같은 작업을 동시에 처리한다.<br>
ex) 사용자 입력(재생/정지 버튼 클릭)처리, 음악 데이터 네트워크 스트리밍, 음향 데이터를 디코딩 및 출력

이 모든 작업은 독립적인 쓰레드로 실행되어, 프로그램의 반응성을 유지하면서 효율적인 멀티태스킹을 가능하게 한다.

--------
## 쓰레드와 프로세스의 차이

**메모리 구조**<br>
프로세스는 운영체제에서 독립적인 메모리 공간(코드,데이터,힙,스택)을 가진다.<br>
쓰레드는 프로세스 내부에서 실행되며, 코드, 데이터, 힙 메모리를 공유하지만, 스택은 개별적으로 갖는다.

**생성 비용**<br>
프로세스를 생성하는 데에는 독립적인 메모리 공간을 할당하는 등의 작업이 필요하므로 오버헤드가 크다.<br>
쓰레드는 기존 프로세스의 메모리를 활용하므로 생성 비용이 적다.

**통신 방식**<br>
프로세스 간 통신은 보통 파일, 소켓, 파이프 등을 사용해야 하며 복잡하다.<br>
쓰레드는 메모리를 공유하므로 간단하게 데이터를 주고 받을 수 있다.

예 : 쓰레드와 프로세스의 메모리 구조

프로세스의 메모리 구조
```java
프로세스 A
┌────────────────┐
│  코드 영역     │
│  데이터 영역   │
│  힙 영역       │
│  스택 1        │
│  스택 2        │
└────────────────┘
```

쓰레드의 메모리 구조(프로세스 A 내의 쓰레드)
```java
┌────────────────────────┐
│ 공유: 코드, 데이터, 힙 │
├────────────────────────┤
│ 스택 1 (쓰레드 1 전용) │
│ 스택 2 (쓰레드 2 전용) │
└───────────────────────┘
```
쓰레드는 스택을 제외한 모든 메모리 영역을 공유하기 때문에, 프로세스 내에서 효율적으로 동작할 수 있다. 하지만 이러한 공유 특성 때문에
잘못된 동기화로 인해 데이터 충돌이 발생할 가능성도 있다.

-------------
## 쓰레드의 특징
+ **자원 공유** : 같은 프로세스 내의 모든 쓰레드는 동일한 힙, 데이터, 코드 영역을 공유한다. 이를 통해 쓰레드 간 데이터 교환이 빠르고 효율적이다.
+ **독립성** : 쓰레드는 스택을 개별적으로 가지고 있으며, 각각 독립적인 실행 흐름을 가진다.
+ **경량성** : 쓰레드는 프로세스보다 생성 및 전환 비용이 적다. 따라서 다수의 쓰레드를 생성하더라도 시스템 자원에 큰 부담을 주지 않는다.
+ **동시성과 병렬성** : 멀티쓰레드 환경에서는 여러 작업을 동시에 수행할 수 있다. 멀티코어 CPU에서는 실제로 여러 쓰레드가 병렬로 실행된다.
+ **스케줄링** : 운영체제는 쓰레드의 실행 순서를 결정하며, 이를 스케줄링이라고 한다. 스케줄링 방식에 따라 쓰레드의 실행 성능이 달라질 수 있다.

-------------
## 쓰레드의 필요성
+ **병렬 처리** : 멀티코어 CPU를 활용하여 작업을 병렬로 처리할 수 있다. 예를 들어, 대규모 데이터 연산을 여러 쓰레드로 나누어 처리하면 실행 시간이 단축된다.
+ **대기 시간이 긴 작업 처리** : 네트워크 통신, 파일 입출력, 데이터베이스 쿼리 등 대기 시간이 긴 작업은 메인 쓰레드에서 처리하면 프로그램이 멈춘 것처럼 보일 수 있다.
  이를 별도의 쓰레드에서 처리하면, 프로그램의 응답성을 유지할 수 있다.
+ **사용자 인터페이스(UI) 응답성 개선** : GUI 프로그램에서는 메인 쓰레드가 사용자 입력(버튼 클릭, 텍스트 입력)을 처리한다. 이 쓰레드가 다른 작업으로 바빠지면, UI가 멈춘 것처럼 보인다. 쓰레드를 분리하면 UI의 반응 속도를 유지할 수 있다.

---------------
예제 : 싱글 쓰레드와 멀티 쓰레드 비교<br>
싱글 쓰레드
```java
// 싱글 쓰레드 예제
public class SingleThreadExample {
    public static void main(String[] args) {
        System.out.println("작업 1 시작");
        performTask("Task 1"); // 첫 번째 작업 수행

        System.out.println("작업 2 시작");
        performTask("Task 2"); // 두 번째 작업 수행
    }

    private static void performTask(String taskName) {
        for (int i = 1; i <= 5; i++) {
            System.out.println(taskName + " - Step " + i);
            try {
                Thread.sleep(1000); // 1초 대기
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}
출력
작업 1 시작
Task 1 - Step 1
Task 1 - Step 2
Task 1 - Step 3
Task 1 - Step 4
Task 1 - Step 5
작업 2 시작
Task 2 - Step 1
Task 2 - Step 2
Task 2 - Step 3
Task 2 - Step 4
Task 2 - Step 5
```

멀티 쓰레드
```java
// 멀티 쓰레드 예제
class Task extends Thread {
    private String taskName;

    public Task(String taskName) {
        this.taskName = taskName;
    }

    @Override
    public void run() {
        for (int i = 1; i <= 5; i++) {
            System.out.println(taskName + " - Step " + i);
            try {
                Thread.sleep(1000); // 1초 대기
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}

public class MultiThreadExample {
    public static void main(String[] args) {
        System.out.println("작업 시작");

        Task task1 = new Task("Task 1");
        Task task2 = new Task("Task 2");

        task1.start(); // 쓰레드 1 실행
        task2.start(); // 쓰레드 2 실행
    }
}
출력
작업 시작
Task 1 - Step 1
Task 2 - Step 1
Task 1 - Step 2
Task 2 - Step 2
Task 1 - Step 3
Task 2 - Step 3
Task 1 - Step 4
Task 2 - Step 4
Task 1 - Step 5
Task 2 - Step 5
```
------------------
## 싱글 쓰레드와 멀티 쓰레드

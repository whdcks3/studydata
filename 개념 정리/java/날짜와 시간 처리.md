# java.time
## 1. 기존 API의 한계
Java 8 이전에 사용되던 날짜와 시간 관련 API인 ```java.util.Date```와 ```java.util.Calendar```는 많은 한계를 가지고 있었다. 이로 인해 날짜 및 시간 처리가 복잡하고 오류를 유발하기 쉬운 구조로 되어 있었다.

**불변성 부족**<br>
```java.util.Date```는 가변 객체로 설계되었다. 이는 객체의 상태가 생성 이후에도 변경될 수 있다는 의미이다.<br>
예를 들어, 동일한 ```Date```객체를 여러 스레드에서 사용할 경우 데이터가 변경되어 동기화 문제가 발생할 수 있따. 이러한 특성은 멀티스레드 환경에서의 사용을 어렵게 한다.

**복잡한 사용법**<br>
```java.util.Calendar```는 날짜를 조작하기 위해 여러 단계를 거쳐야 하며, 코드가 직관적이지 않다.<br>
예를 들어, 현재 날짜에서 5일을 더하는 작업은 아래와 같이 복잡하게 작성해야 한다.
```java
Calendar calendar = Calendar.getInstance();
calendar.setTime(new Date());
calendar.add(Calendar.DATE, 5);
Date resultDate = calendar.getTime();
System.out.println(resultDate);
```
이는 간단한 연산도 장황하게  작성해야 하며, 코드의 가독성을 떨어뜨린다.

**불일관성과 모호성**<br>
```java.util.Date```의 설계에는 많은 모호성이 존재한다.<br>
월(Month)값은 0부터 시작하기 때문에, 0이 1월, 11이 12월을 의미한다.<br>
연도(Year)은 1900을 기준으로 계산된다.
```java
Date date = new Date(2025, 0, 1); // 2025년 1월 1일을 의도
System.out.println(date); // Fri Jan 01 00:00:00 KST 3925
```
위 코드의 출력 결과에서 연도가 3925인 이유는 ```Date```가 내부적으로 1900을 기준으로 연도를 계산하기 때문이다.

**시간대 처리의 어려움**<br>
```java.util.Date```와 ```java.util.Calendar```는 시간대를 명시적으로 처리하지 않는다.<br>
시간대(Time Zone) 변환이나 UTC 오프셋 계산과 같은 작업을 수행하려면 추가적인 라이브러리나 복잡한 로직이 필요하다.

---------------------
## 1-2 java.time API의 등장 배경과 특징
Java 8에서 도입된 ```java.time```API는 기존의 한계를 극복하기 위해 설계되었다. 이 API는 ISO-8601 국제 표준을 기반으로 날짜와 시간을 처리하며, 현대적인 애플리케이션 개발에 적합한 기능을 제공한다.

**등장 배경**<br>
&nbsp;&nbsp;&nbsp;날짜와 시간 처리의 복잡성을 줄이고, 간단하고 명확한 API를 제공하기 위해 설계 되었다.<br>
&nbsp;&nbsp;&nbsp;불변성(Immutable)과 스레드 안전성을 보장하는 구조로 설계되었다.<br>
&nbsp;&nbsp;&nbsp;시간대와 UTC 오프셋 관련 작업을 명확하고 일관되게 수행할 수 있다.

**주요 특징**<br>

**불변 객체로 설계**<br>
&nbsp;&nbsp;&nbsp;java.time의 모든 클래스는 불변 객체(Immutable Object)로 설계되었다.<br>
&nbsp;&nbsp;&nbsp;이는 객체를 생성한 이후에는 상태를 변경할 수 없음을 의미하며, 멀티스레드 환경에서도 안전하게 사용할 수 있다.
```java
LocalDate today = LocalDate.now(); // 현재 날짜
LocalDate tomorrow = today.plusDays(1); // 새로운 객체 생성
System.out.println("오늘: " + today); // 오늘: 2025-01-02
System.out.println("내일: " + tomorrow); // 내일: 2025-01-03
```

**명확하고 직관적인 클래스 구조**<br>
```LocalDate``` : 날짜(연,월,일)만 처리<br>
```LocalTime``` : 시간(시,분,초)만 처리<br>
```LocalDateTime``` : 날짜와 시간을 함께 처리<br>
```ZonedDateTime``` : 시간대(Time Zone)을 포함한 날짜와 시간 처리

**시간대와 오프셋 지원**<br>
ZoneId와 ZonedDateTime클래스를 통해 시간대 관련 작업을 쉽게 수행할 수 있다.<br>
글로벌 애플리케이션 개발 시 유용하다.

**포메팅과 파싱 지원**
```DateTimeFormatter``` 클래스를 이용하여 날짜와 시간을 특정 형식으로 출력하거나, 문자열을 날짜 객체로 변환할 수 있다.

----------------------------
## 1-3 java.time API 주요 클래스
```java.time``` API는 다양한 클래스를 제공하며, 각각 특정 용도에 적합하게 설계되었다. 

|클래스|설명|예시|
|:---|:---|:---|
|LocalDate|날짜만 처리(연, 월, 일)|2025-01-02|
|LocalTime|시간만 처리(시, 분, 초)|14:35:10|
|LocalDateTime|날짜와 시간을 함께 처리|2025-01-02T114:35:10|
|ZonedDateTime|시간대가 포함된 날짜와 시간 처리|2025-01-02T14:35+09:00|
|Duration|두 시간 간격을 초/나노초 단위로 계산|PH2H30M(2시간 30분)|
|Period|두 날짜 간격을 연/월/일 단위로 계산|P1Y6M10D(1년 6개월 10일)|
|DateTimeFormatter|날짜와 시간을 특정 형식으로 출력/파싱|yyyy-MM-DD HH:mm:ss|

--------------------
## 1-4 코드 예제 : java.time API의 기본 사용
현재 날짜와 시간 출력
```java
import java.time.LocalDate;
import java.time.LocalTime;
import java.time.LocalDateTime;

public class DateTimeExample {
    public static void main(String[] args) {
        // 현재 날짜
        LocalDate currentDate = LocalDate.now();
        System.out.println("현재 날짜: " + currentDate);

        // 현재 시간
        LocalTime currentTime = LocalTime.now();
        System.out.println("현재 시간: " + currentTime);

        // 현재 날짜와 시간
        LocalDateTime currentDateTime = LocalDateTime.now();
        System.out.println("현재 날짜와 시간: " + currentDateTime);
    }
}
출력 결과

현재 날짜: 2025-01-02
현재 시간: 14:35:10.123
현재 날짜와 시간: 2025-01-02T14:35:10.123
```
-------------------
## 1-5 주의사항

**불변 객체의 특성**<br>
```java.time```API의 클래스는 불변 객체로 설계되었기 때문에 연산 메소드는 항상 새로운 객체를 반환한다.<br>
기존 객체의 상태는 변경되지 않는다.
```java
LocalDate date = LocalDate.now();
LocalDate nextWeek = date.plusWeeks(1); // 새로운 객체 생성
System.out.println("현재 날짜: " + date); // 변경되지 않음
System.out.println("다음 주 날짜: " + nextWeek); // 1주일 후 날짜
```

**기존 API와의 호환성**<br>
```java.time```과```java.util.Date```간의 변환이 필요한 경우 ```Instant```를 활용할 수 있다.
```java
import java.time.Instant;
import java.util.Date;

public class CompatibilityExample {
    public static void main(String[] args) {
        // java.util.Date → java.time.Instant
        Date oldDate = new Date();
        Instant instant = oldDate.toInstant();

        // java.time.Instant → java.util.Date
        Date newDate = Date.from(instant);
        System.out.println(newDate);
    }
}
```

**시간대 사용 여부**<br>
시간대가 필요하지 않은 경우 LocalDate,LocalTime,LocalDateTime을 사용하고, 시간대가 필요한 경우 ZonedDateTime을 사용해야 한다.

------------------
# 2. 클래스와 기본 사용법 
## 2-1 LocalDate
```LocalDate```는 날짜(연, 월, 일)을 처리하기 위해 설계된 클래스다. 시간이나 시간대 정보는 포함하지 않는다. 이 클래스는 불변성을 가지며, 날짜를 다룰 때 자주 사용된다.

### 주요 메소드
```now()```<br>
&nbsp;&nbsp;&nbsp;현재 날짜를 반환한다.<br>
&nbsp;&nbsp;&nbsp;시스템의 기본 시간대를 기준으로 현재 날짜를 가져온다.

```of()```<br>
&nbsp;&nbsp;&nbsp;특정 날짜를 생성한다.<br>
&nbsp;&nbsp;&nbsp;연도, 월, 일 값을 명시적으로 지정해야 한다.

```getYear()```<br>
&nbsp;&nbsp;&nbsp;날짜에서 연도를 반환한다.

```getMonthValue()```<br>
&nbsp;&nbsp;&nbsp;날짜에서 월(1~12)를 반환한다.

```getDayOfMonth()```<br>
&nbsp;&nbsp;&nbsp;날짜에서 해당 월의 일(1~31)를 반환한다.

```getDayOfWeek()```
&nbsp;&nbsp;&nbsp;날짜에서 요일을 반환한ㄷ. 반환 값은 ```DayOfWeek```열거형이다.

-------------------------
### 코드 예제
현재 날짜 가져오기<br>
```now()```메소드를 사용하면 현재 날짜를 손쉽게 가져올 수 있다.
```java
import java.time.LocalDate;

public class LocalDateExample {
    public static void main(String[] args) {
        LocalDate today = LocalDate.now();
        System.out.println("오늘 날짜: " + today);
    }
}
```

특정 날짜 생성<br>
```of()``` 메소드를 사용하여 특정 날짜를 생성할 수 있다.
```java
import java.time.LocalDate;

public class LocalDateExample {
    public static void main(String[] args) {
        LocalDate birthday = LocalDate.of(1995, 5, 23);
        System.out.println("생일: " + birthday);
    }
}
```

날짜 정보 추출<br>
```getYear()```,```getMonthValue()```,```getDayOfMonth()```등을 사용하여 날짜의 세부 정보를 추출할 수 있다.
```java
import java.time.LocalDate;

public class LocalDateExample {
    public static void main(String[] args) {
        LocalDate date = LocalDate.of(2025, 1, 2);
        System.out.println("연도: " + date.getYear());
        System.out.println("월: " + date.getMonthValue());
        System.out.println("일: " + date.getDayOfMonth());
        System.out.println("요일: " + date.getDayOfWeek());
    }
}
```
------------------------------
## 2-2 LocalTime
```LocalTime```은 시간만 처리하는 데 사용되는 클래스다. 이 클래스는 시, 분, 초, 나노초를 관리하며, 날짜와 시간대를 포함하지 않는다. 예를 들어 업무 시작 시간, 종료 시간, 타이머 등을 관리할 때 활용할 수 있다.
